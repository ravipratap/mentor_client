<!--
  Generated template for the OtpPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Verify</ion-title>
  </ion-navbar>

</ion-header>
<ion-content padding>
  <ion-row *ngIf="signedIn">
    <ion-col col-lg-8 col-xl-8 offset-lg-2 offset-xl-2 text-center>
      <ion-spinner> </ion-spinner> ..
    </ion-col>
  </ion-row>   
  <div *ngIf="otpForm">
    <form [formGroup]="otpForm" novalidate >
      <ion-grid nopadding>
        <ion-row>
          <ion-col col-lg-8 col-xl-8 offset-lg-2 offset-xl-2>
            <h3>Please enter the verification code</h3>
            <p *ngIf="!email && !mobile"> <span style="vertical-align: -35%;" item-left>Code has been sent via email / SMS. </span> <button ion-button small clear (click)="resendOTP(email, undefined)" *ngIf="resendEmailOTP">Resend Email</button> <button ion-button small clear (click)="resendOTP(undefined, mobile)" *ngIf="resendMobileOTP">Resend SMS</button></p>
            <p *ngIf="email && mobile"> <span style="vertical-align: -35%;" item-left>Code has been sent via email / SMS.</span>  <button ion-button small clear (click)="resendOTP(email, undefined)" *ngIf="resendEmailOTP">Resend Email</button> <button ion-button small clear (click)="resendOTP(undefined, mobile)" *ngIf="resendMobileOTP">Resend SMS</button></p>
            <p *ngIf="email && !mobile"> <span style="vertical-align: -35%;" item-left>Code has been sent via email. </span> <button ion-button small clear (click)="resendOTP(email, undefined)" *ngIf="resendEmailOTP">Resend Email</button>  </p>
            <p *ngIf="!email && mobile"> <span style="vertical-align: -35%;" item-left>Code has been sent via SMS. </span> <button ion-button small clear (click)="resendOTP(undefined, mobile)" *ngIf="resendMobileOTP">Resend SMS</button></p>
          </ion-col>
        </ion-row>

        <ion-row  *ngIf="email">
          <ion-col col-lg-6 col-xl-6 offset-lg-2 offset-xl-2>
            <ion-item>
              <ion-label> 
                <ion-icon name="mail" ></ion-icon>
              </ion-label>
              <ion-input class="form-control" formControlName="emailOTP" type="password" required *ngIf="!showEmailOTP"  placeholder="Type Code"> </ion-input> 
              <ion-input class="form-control" formControlName="emailOTP" type="text" required *ngIf="showEmailOTP"  placeholder="Type Code">  </ion-input>           
            </ion-item>   
            <p ion-text *ngIf="otpForm.get('emailOTP') && !otpForm.get('emailOTP').valid && submitted" color="danger" padding-left>
                Please enter code
              </p> 
          </ion-col>
          <ion-col class="showPassword" col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2>
            <button ion-button clear (click)="toggleShowEmailOTP()" block><span *ngIf="!showEmailOTP">Show</span><span *ngIf="showEmailOTP">Hide</span></button>
          </ion-col>
        </ion-row>
        <ion-row  *ngIf="mobile">
          <ion-col col-lg-6 col-xl-6 offset-lg-2 offset-xl-2>
            <ion-item>
              <ion-label> 
                <ion-icon name="call" ></ion-icon>
              </ion-label>
              <ion-input class="form-control" formControlName="mobileOTP" type="password" required *ngIf="!showMobileOTP"  placeholder="Type Code"> </ion-input> 
              <ion-input class="form-control" formControlName="mobileOTP" type="text" required *ngIf="showMobileOTP"  placeholder="Type Code">  </ion-input>       
            </ion-item>  
            <p ion-text *ngIf="otpForm.get('mobileOTP') && !otpForm.get('mobileOTP').valid && submitted" color="danger" padding-left>
              Please enter code
            </p>
          </ion-col>
          <ion-col class="showPassword" col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2>
            <button ion-button clear (click)="toggleShowMobileOTP()" block><span *ngIf="!showMobileOTP">Show</span><span *ngIf="showMobileOTP">Hide</span></button>
          </ion-col>
        </ion-row>
        <ion-row  *ngIf="!email && !mobile">
          <ion-col col-lg-6 col-xl-6 offset-lg-2 offset-xl-2>
            <ion-item>
              <ion-label> 
                <ion-icon name="at" ></ion-icon>
              </ion-label>
              <ion-input class="form-control" formControlName="OTP" type="password" required *ngIf="!showOTP"  placeholder="Type Code"> </ion-input> 
              <ion-input class="form-control" formControlName="OTP" type="text" required *ngIf="showOTP"  placeholder="Type Code">  </ion-input>          
            </ion-item>  
          </ion-col>
          <ion-col class="showPassword" col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2>
            <button ion-button clear (click)="toggleShowOTP()" block><span *ngIf="!showOTP">Show</span><span *ngIf="showOTP">Hide</span></button>
          </ion-col>
          <p ion-text *ngIf="otpForm.get('OTP') && !otpForm.get('OTP').valid && submitted" color="danger" padding-left>
            Please enter code
          </p>
        </ion-row>

        <ion-row>
          <ion-col col-lg-8 col-xl-8 offset-lg-2 offset-xl-2>
              <button ion-button  block color="secondary" (click)="save()"> Next </button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>
  </div>
</ion-content>
